{{ 'video-and-product.css' | asset_url | stylesheet_tag }}

<section class="video-and-product">
  <div class="video-and-product__wrapper">
    <div class="video-and-product__video">
      <div class="video-and-product__wraper-img">
        <img
          class="video-and-product__img"
          src="https://dermaflage.com/wp-content/uploads/2021/06/before-and-after-dermaflage.webp"
          alt=""
        >
        <button class="video-and-product__button" id="play-button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            version="1.1"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            xmlns:svgjs="http://svgjs.com/svgjs"
            width="50"
            height="50"
            x="0"
            y="0"
            viewBox="0 0 24 24"
            style="enable-background: new 0 0 512 512"
            xml:space="preserve"
            class=""
          >
            <g>
              <path
                d="M13.96 12 10 14.228V9.773l3.96 2.228ZM24 12c0 6.617-5.383 12-12 12S0 18.617 0 12 5.383 0 12 0s12 5.383 12 12Zm-5.96 0L8 6.353v11.295l10.04-5.647Z"
                fill="#000000"
                data-original="#000000"
                class=""
              ></path>
            </g>
          </svg>
        </button>
      </div>

      <div id="video-overlay" class="video-overlay" style="display: none">
        <div class="video-container">
          <iframe
            class="video-js-vimeo"
            width="1700"
            height="960"
            src="https://www.youtube.com/embed/YvYmNwpqkSg"
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
          ></iframe>
          <span id="close-button" class="video-close">&times;</span>
        </div>
      </div>
    </div>
    <div class="video-and-product__product">
      {% for block in section.blocks %}  
      {% case block.type %}
       
      {% when 'product' %}
       {% assign product = block.settings.product%}
       <div class="menu__cart-product__wrapper">
         
         <div class='menu__cart-product__image'>                                
           <img src="{{product.featured_image | image_url: width: 300}}" alt="" class='menu__cart-product__picture' loading='lazy' style=" max-width: 100%;">
         </div>

         <div class="menu__cart-product_image-hover-wrapper">
           <div class="menu__cart-product_hover-block-style">
             <div class="menu__cart-product-quick-view">
               <a href="{{product.url}}" class="menu__cart-product__link">
               <svg width="22" height="22" viewBox="0 0 26 25" fill="none" xmlns="http://www.w3.org/2000/svg">
               <g clip-path="url(#clip0_8_982)">
               <path d="M25.5047 11.8657C23.148 7.27322 18.4823 4.16602 13.14 4.16602C7.79765 4.16602 3.13067 7.27539 0.775234 11.8661C0.67582 12.0625 0.624023 12.2795 0.624023 12.4996C0.624023 12.7196 0.67582 12.9366 0.775234 13.133C3.13198 17.7255 7.79765 20.8327 13.14 20.8327C18.4823 20.8327 23.1493 17.7233 25.5047 13.1326C25.6041 12.9362 25.6559 12.7192 25.6559 12.4991C25.6559 12.2791 25.6041 12.0621 25.5047 11.8657ZM13.14 18.7493C11.9023 18.7493 10.6923 18.3828 9.66323 17.696C8.6341 17.0093 7.832 16.0332 7.35835 14.8911C6.8847 13.7491 6.76077 12.4924 7.00223 11.28C7.2437 10.0677 7.83972 8.95401 8.71491 8.07993C9.59011 7.20585 10.7052 6.6106 11.9191 6.36944C13.133 6.12828 14.3913 6.25205 15.5348 6.7251C16.6783 7.19815 17.6557 7.99923 18.3433 9.02703C19.0309 10.0548 19.398 11.2632 19.398 12.4993C19.3984 13.3202 19.2368 14.1331 18.9224 14.8916C18.6081 15.6501 18.1471 16.3392 17.5659 16.9197C16.9847 17.5001 16.2947 17.9605 15.5353 18.2744C14.7758 18.5884 13.9619 18.7497 13.14 18.7493ZM13.14 8.33268C12.7676 8.33788 12.3976 8.39321 12.04 8.49718C12.3348 8.89721 12.4762 9.38949 12.4387 9.88474C12.4012 10.38 12.1872 10.8454 11.8356 11.1966C11.4839 11.5478 11.0179 11.7615 10.522 11.799C10.0261 11.8364 9.53323 11.6952 9.13269 11.4008C8.90461 12.2401 8.94578 13.1296 9.25041 13.9442C9.55504 14.7589 10.1078 15.4576 10.8309 15.942C11.5539 16.4265 12.4109 16.6723 13.2812 16.6448C14.1515 16.6174 14.9912 16.318 15.6822 15.789C16.3732 15.2599 16.8807 14.5277 17.1333 13.6955C17.3858 12.8633 17.3707 11.973 17.09 11.1498C16.8094 10.3266 16.2773 9.61204 15.5687 9.10669C14.8601 8.60134 14.0107 8.33064 13.14 8.33268Z" fill="#fff"/>
               </g>
               <defs>
               <clipPath id="clip0_8_982">
               <rect width="25.032" height="25" fill="#fff" transform="translate(0.624023)"/>
               </clipPath>
               </defs>
               </svg>
        
              
                  
               </a>
             </div>
             <div class="menu__cart-product_view-details">                                       
              <a href="{{product.url}}" class="menu__cart-product__link">
          <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="18" height="18"><path d="M7.896,16.104c-.586-.585-.586-1.536,0-2.121,.586-.586,1.535-.586,2.121,0,1.326,1.326,3.64,1.327,4.966,0l4.989-4.989c1.369-1.369,1.369-3.597,0-4.966s-3.597-1.369-4.966,0c-.586,.586-1.535,.586-2.121,0-.586-.585-.586-1.536,0-2.121,2.538-2.539,6.67-2.539,9.208,0,2.539,2.539,2.539,6.669,0,9.208l-4.989,4.989c-1.27,1.27-2.937,1.904-4.604,1.904s-3.335-.635-4.604-1.904Zm-1.384,7.893c1.667,0,3.334-.635,4.604-1.904,.586-.585,.586-1.536,0-2.121-.586-.586-1.535-.586-2.121,0-1.37,1.37-3.598,1.369-4.966,0-1.369-1.369-1.369-3.597,0-4.966l4.961-4.961c1.37-1.37,3.598-1.37,4.966,0,.586,.586,1.535,.586,2.121,0,.586-.585,.586-1.536,0-2.121-2.539-2.539-6.669-2.539-9.208,0L1.907,12.885c-2.539,2.539-2.539,6.669,0,9.208,1.27,1.27,2.937,1.904,4.604,1.904Z"  fill="#fff"/></svg>

              </a>
              </div>
             <div class="menu__cart-product_add-to-cart">                                        
               <a href="{{product.url}}" class="menu__cart-product__link-options">Select Options
               <span class="menu__cart-product_svg">
                 <svg width="15" height="15" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                   <path d="M6.78042 0H15.5417C18.8793 0 21.5912 2.6 21.5912 5.8V14.2C21.5912 15.7383 20.9538 17.2135 19.8193 18.3012C18.6848 19.3889 17.1461 20 15.5417 20H6.78042C3.44279 20 0.730957 17.4 0.730957 14.2V5.8C0.730957 4.26174 1.36831 2.78649 2.5028 1.69878C3.6373 0.61107 5.176 0 6.78042 0ZM6.57182 2C5.57597 2 4.62091 2.37928 3.91675 3.05442C3.21258 3.72955 2.81698 4.64522 2.81698 5.6V14.4C2.81698 16.39 4.49623 18 6.57182 18H15.7503C16.7462 18 17.7012 17.6207 18.4054 16.9456C19.1096 16.2705 19.5051 15.3548 19.5051 14.4V5.6C19.5051 3.61 17.8259 2 15.7503 2H6.57182ZM16.6369 3.5C16.9827 3.5 17.3143 3.6317 17.5588 3.86612C17.8033 4.10054 17.9406 4.41848 17.9406 4.75C17.9406 5.08152 17.8033 5.39946 17.5588 5.63388C17.3143 5.8683 16.9827 6 16.6369 6C16.2911 6 15.9595 5.8683 15.715 5.63388C15.4705 5.39946 15.3331 5.08152 15.3331 4.75C15.3331 4.41848 15.4705 4.10054 15.715 3.86612C15.9595 3.6317 16.2911 3.5 16.6369 3.5ZM11.1611 5C12.5442 5 13.8707 5.52678 14.8487 6.46447C15.8267 7.40215 16.3761 8.67392 16.3761 10C16.3761 11.3261 15.8267 12.5979 14.8487 13.5355C13.8707 14.4732 12.5442 15 11.1611 15C9.77795 15 8.45148 14.4732 7.47346 13.5355C6.49545 12.5979 5.94601 11.3261 5.94601 10C5.94601 8.67392 6.49545 7.40215 7.47346 6.46447C8.45148 5.52678 9.77795 5 11.1611 5ZM11.1611 7C10.3312 7 9.53531 7.31607 8.9485 7.87868C8.3617 8.44129 8.03203 9.20435 8.03203 10C8.03203 10.7956 8.3617 11.5587 8.9485 12.1213C9.53531 12.6839 10.3312 13 11.1611 13C11.9909 13 12.7868 12.6839 13.3736 12.1213C13.9604 11.5587 14.2901 10.7956 14.2901 10C14.2901 9.20435 13.9604 8.44129 13.3736 7.87868C12.7868 7.31607 11.9909 7 11.1611 7Z" fill="#fff"/>
                   </svg>
               </span>
               </a>                                      
             </div>                                         
           </div>
         </div>

         <div class ="menu__cart-product_down-box">
           {% comment %} rating {% endcomment %}
           {%- if show_rating and product.metafields.reviews.rating.value != blank -%}
             {% liquid
               assign rating_decimal = 0
               assign decimal = product.metafields.reviews.rating.value.rating | modulo: 1
               if decimal >= 0.3 and decimal <= 0.7
                 assign rating_decimal = 0.5
               elsif decimal > 0.7
                 assign rating_decimal = 1
               endif
             %}
             <div
               class="rating"
               role="img"
               aria-label="{{ 'accessibility.star_reviews_info' | t: rating_value: product.metafields.reviews.rating.value, rating_max: product.metafields.reviews.rating.value.scale_max }}"
             >
               <span
                 aria-hidden="true"
                 class="rating-star color-icon-{{ settings.accent_icons }}"
                 style="--rating: {{ product.metafields.reviews.rating.value.rating | floor }}; --rating-max: {{ product.metafields.reviews.rating.value.scale_max }}; --rating-decimal: {{ rating_decimal }};"
               ></span>
             </div>
             <p class="rating-text caption">
               <span aria-hidden="true">
                 {{- product.metafields.reviews.rating.value }} /
                 {{ product.metafields.reviews.rating.value.scale_max -}}
               </span>
             </p>
             <p class="rating-count caption">
               <span aria-hidden="true">({{ product.metafields.reviews.rating_count }})</span>
               <span class="visually-hidden">
                 {{- product.metafields.reviews.rating_count }}
                 {{ 'accessibility.total_reviews' | t -}}
               </span>
             </p>
           {%- endif -%}

           <div product-id="{{ product.id }}" product-handle="{{ product.handle }}" class="alireviews-review-star-rating"></div>
              
           {% comment %} rating {% endcomment %}
           {% if product.content != blank%}
            <div class="based-reviews">
            {{product.content}}
            </div>
          {% endif %}

           <div class='menu__cart-product__title'>{{product.title}}</div>

           <div class="no-js-hidden" id="price-{{ section.id }}" role="status" {{ block.shopify_attributes  }}>
            {%- render 'price',
               product: product money,
               use_variant: true,
               show_badges: false,
               price_class: 'price--large', 
             -%}
           </div>    

         </div>

       </div>
     {% endcase %}
   {% endfor %}        
    </div>
  </div>
  <div class="video-and-product__Best-Sellers"> 
    <div class="video-and-product__Best-Sellers_title">Best Sellers</div>
    <h2 class="video-and-product__Best-Sellers_text">COMPLEXION PERFECTION</h2>
    <span class="video-and-product__Best-Sellers_dis">Loved by dermatologist, pro makeup artists & beauty bloggers, Dermaflage products empower you to put your best face forward.</span>
  </div>
</section>

<script>
  const playButton = document.getElementById('play-button');
  const closeButton = document.getElementById('close-button');
  const videoOverlay = document.getElementById('video-overlay');
  const video = document.querySelector('.video-js-vimeo');

  playButton.addEventListener('click', () => {
    videoOverlay.style.display = 'flex';
    video.src = 'https://www.youtube.com/embed/YvYmNwpqkSg';
  });

  closeButton.addEventListener('click', () => {
    videoOverlay.style.display = 'none';
    video.src = '';
  });
</script>

{% schema %}
{
  "name": "video-and-product",
  "tag": "section",
  "class": "section",
  "settings": [
   
  ],
  "blocks": [
    {
      "name": "product",
      "type": "product",
      "settings": [
        {
        "type": "product",
        "id": "product",
        "label": "Product"
       }
      ]
    }
  ],
  "presets": [{ "name": "video-and-product" }]
}
{% endschema %}
